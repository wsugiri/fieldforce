(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2c51c7d9"],{"0921":function(t,i,e){"use strict";var a=e("d1fc"),s=e.n(a);s.a},"808b":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-layout",{staticClass:"page-visibily-detail"},[e("q-layout-header",[e("q-toolbar",{attrs:{color:"primary"}},[e("q-toolbar-title",[t._v(t._s(t.visibility.activity_name))]),e("q-btn",{attrs:{flat:""},on:{click:function(i){t.save()}}},[t._v("Save")]),e("q-btn",{attrs:{flat:""},on:{click:function(i){t.cancel()}}},[t._v("Cancel")])],1)],1),e("q-page-container",[e("q-page",[e("v-store-profile",{attrs:{store:t.store}}),e("div",{staticClass:"card-visibility"},[e("q-card",[e("q-card-main",[e("q-field",{attrs:{icon:"important_devices",label:t.labelName,helper:t.labelHelper}},[e("q-input",{model:{value:t.model.qty_items,callback:function(i){t.$set(t.model,"qty_items",i)},expression:"model.qty_items"}})],1)],1)],1),e("v-take-picture",{staticClass:"q-mt-sm",attrs:{images:t.images}})],1)],1)],1)],1)},s=[];a._withStripped=!0;e("ac6a"),e("96cf");var r=e("c973"),n=e.n(r),o=(e("7514"),e("9437")),c=e("af13"),l=e("f61f"),u=e("ad89"),v=e("3609"),d={images:{1:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg",2:"http://dkm.boogr-sooka.club/img/samples/CR-002.jpg",3:"http://dkm.boogr-sooka.club/img/samples/CR-003.jpg",4:"http://dkm.boogr-sooka.club/img/samples/CR-004.jpg"}},m={components:{vStoreProfile:u["a"],vTakePicture:v["a"]},data:function(){return{store:{},activity:{},images:[{id:1,src:d.images[1]},{id:2,src:d.images[2]},{id:3,src:d.images[3]},{id:4,src:d.images[4]}],model:{qty_items:1}}},created:function(){this.refresh()},computed:{visibility:function(){var t=this.$route.params.vid;return this.activity.subs?this.activity.subs.find(function(i){return i.activity_id==t}):{}},labelName:function(){var t=this.visibility.activity_name,i=t||"Device";return"".concat(i," Terpasang")},labelHelper:function(){var t=this.visibility.activity_name,i=t||"Device";return"masukkan jumlah ".concat(i," Terpasang").toLowerCase()}},methods:{refresh:function(){var t=n()(regeneratorRuntime.mark(function t(){var i,e,a,s,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$q.loading.show(),i=this.$route,e=i.params,a=e.id,e.vid,t.next=5,c["a"].findOne(a,1);case 5:s=t.sent,r=s.store,n=s.activity,this.store=r,this.activity=n,this.handleData(r),this.$q.loading.hide();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleData:function(t){var i=this.visibility,e=t.activities;if(e){var a=e.find(function(t){return t.activity_id==i.activity_id});if(a&&a.model){var s=a.model;this.model=s;for(var r=0;r<4;r+=1){var n=s["pic_".concat(r+1)];if(n){var o=l["a"].resolveImage(n);this.images[r].src=o}}}}},save:function(){var t=n()(regeneratorRuntime.mark(function t(){var i,e,a,s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=[],this.images.forEach(function(t){var e=t.src;(e.length>100||e.indexOf("fieldforce.seegolabs.com/api/buckets")>0)&&i.push(e)}),0!==i.length){t.next=5;break}return this.$q.notify("Silahkan masukkan minimal 1 foto"),t.abrupt("return");case 5:if(e=this.store,this.activity,a=this.visibility,e.activities||(e.activities=[]),s=e.activities.find(function(t){return t.activity_id==a.activity_id}),s)for(r in a)s[r]=a[r];else e.activities.push(a);return a.model||(a.model={start_date:(new Date).toISOString().substr(0,23),activity_id:a.activity_id,store_id:e.store_id,gps:e.visit.visit_gps,isonline:navigator.onLine?1:0}),a.model.qty_items=parseInt(this.model.qty_items),this.$q.loading.show(),t.prev=12,t.next=15,o["a"].save(e,a,i);case 15:this.$q.loading.hide(),this.$router.go(-1),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](12),this.$q.loading.hide(),this.$q.notify(t.t0.message);case 23:case"end":return t.stop()}},t,this,[[12,19]])}));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.$router.go(-1)}}},h=m,f=(e("0921"),e("2877")),p=Object(f["a"])(h,a,s,!1,null,null,null);p.options.__file="visibility_detail.vue";i["default"]=p.exports},d1fc:function(t,i,e){}}]);