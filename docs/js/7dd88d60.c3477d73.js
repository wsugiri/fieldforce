(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7dd88d60"],{"20d6":function(t,e,n){"use strict";var r=n("5ca1"),a=n("0a49")(6),i="findIndex",s=!0;i in[]&&Array(1)[i](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"2f0f":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-outstanding"},[n("q-card",[n("q-card-main",[t._v("Total draft : "+t._s(t.drafts.length))])],1),t._l(t.drafts,function(e,r){return n("q-card",{key:r},[n("q-card-main",{staticClass:"text-weight-light"},[n("div",{staticClass:"capitalize text-bold"},[t._v(t._s(t.storeName(e.data)))]),n("div",{staticClass:"capitalize"},[n("label",{attrs:{for:""}},[t._v("Activity")]),t._v("\n        : "+t._s("visibility"!=e.activity?e.activity:e.activity_name)+"\n      ")]),n("div",{staticClass:"text-left"},[n("label",{attrs:{for:""}},[t._v("Date")]),t._v("\n        : "+t._s(e.day)+"\n      ")]),"visibility"==e.activity&&e.data?n("div",{staticClass:"text-left"},[n("label",{attrs:{for:""}},[t._v("Terpasang")]),t._v("\n        : "+t._s(e.data.qty_items)+"\n      ")]):t._e(),"escalation"==e.activity&&e.data.escal_notes?n("div",{staticClass:"text-left"},[n("label",{attrs:{for:""}},[t._v("Notes")]),t._v("\n        : "+t._s(e.data.escal_notes)+"\n      ")]):t._e(),"training"==e.activity?n("div",{staticClass:"text-left"},[n("label",{attrs:{for:""}},[t._v("Topic")]),t._v("\n        : "+t._s(e.data.training_topic)+"\n      ")]):t._e(),"training"==e.activity?n("div",{staticClass:"text-left"},[n("label",{attrs:{for:""}},[t._v("Peserta")]),n("span",[n("ul",t._l(e.data.training_rsp.split("\n"),function(e){return n("li",{key:e},[t._v(t._s(e))])}))])]):t._e(),t.isonline?n("q-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"},on:{click:function(n){t.sync(e)}}},[t._v("Sync")]):t._e()],1)],1)})],2)},a=[];r._withStripped=!0;n("96cf");var i=n("c973"),s=n.n(i),c=(n("7514"),n("f490"),n("f1c2")),o={data:function(){return{drafts:[],stores:[]}},beforeCreate:function(){var t=this.$store,e=this.$q,n=e.localStorage;t.commit("stores",n.get.item("data-stores")||[]),t.commit("outstanding",n.get.item("data-outstanding")||[]),t.commit("isonline",navigator.onLine)},created:function(){this.stores=this.$store.state.stores,this.drafts=this.$store.state.outstanding},computed:{isonline:function(){return this.$store.state.isonline}},methods:{sync:function(t){var e=this.$q;switch(t.activity){case"training":this.saveTrainig(e,t);break;case"escalation":this.saveEskalasi(e,t);break;case"visibility":this.saveVisibility(e,t);break}},storeName:function(t){var e=this.stores,n=e.find(function(e){return e.store_id==t.store_id});return n?n.store_name:""},getImages:function(t,e){for(var n=[],r=0;r<4;r+=1){var a="".concat(e.key,".").concat(r+1),i=t.localStorage.get.item(a);i&&i.length>100&&n.push(i)}return n},saveTrainig:function(){var t=s()(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=this.getImages(e,n),t.prev=1,this.$q.loading.show(),t.next=5,c["a"].saveTraining(this.$store,n,r);case 5:this.$q.loading.hide(),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$q.loading.hide(),this.$q.notify(t.t0.message);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}(),saveEskalasi:function(){var t=s()(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=this.getImages(e,n),t.prev=1,this.$q.loading.show(),t.next=5,c["a"].saveEskalasi(this.$store,n,r);case 5:this.$q.loading.hide(),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$q.loading.hide(),this.$q.notify(t.t0.message);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}(),saveVisibility:function(){var t=s()(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=this.getImages(e,n),t.prev=1,this.$q.loading.show(),t.next=5,c["a"].saveVisibility(this.$store,n,r);case 5:this.$q.loading.hide(),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$q.loading.hide(),this.$q.notify(t.t0.message);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()}},u=o,f=(n("f40f"),n("2877")),l=Object(f["a"])(u,r,a,!1,null,"91ec1120",null);l.options.__file="outstanding.vue";e["default"]=l.exports},4917:function(t,e,n){"use strict";var r=n("cb7c"),a=n("9def"),i=n("0390"),s=n("5f1b");n("214f")("match",1,function(t,e,n,c){return[function(n){var r=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=c(n,t,this);if(e.done)return e.value;var o=r(t),u=String(this);if(!o.global)return s(o,u);var f=o.unicode;o.lastIndex=0;var l,d=[],g=0;while(null!==(l=s(o,u))){var v=String(l[0]);d[g]=v,""===v&&(o.lastIndex=i(u,a(o.lastIndex),f)),g++}return 0===g?null:d}]})},9635:function(t,e,n){},f1c2:function(t,e,n){"use strict";n("28a5"),n("96cf");var r=n("c973"),a=n.n(r),i=(n("551c"),n("20d6"),n("7514"),n("f9d8")),s=n("f61f"),c=n("49c2"),o=s["a"].init(),u=o.axios,f="data-outstanding",l={saveDraft:function(t,e){var n=t.state.outstanding,r=void 0===n?[]:n,a=r.find(function(t){return t.key===e.key});a?a.data=e.data:r.push(e),t.commit("outstanding",r),i["a"].set(f,r)},removeDraft:function(t,e){var n=t.state.outstanding,r=void 0===n?[]:n,a=r.findIndex(function(t){return t.key===e.key});list.splice(a,1)&&(t.commit("outstanding",r),i["a"].set(f,r))},saveTraining:function(t,e,n){return new Promise(function(){var r=a()(regeneratorRuntime.mark(function r(a,s){var o,d,g;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,o=e.data,r.t0=o.gps,r.t0){r.next=9;break}return r.t1=JSON,r.next=7,c["a"].getCurrentPosition();case 7:r.t2=r.sent,r.t0=r.t1.stringify.call(r.t1,r.t2);case 9:return o.gps=r.t0,o.rsp_qty=o.training_rsp.split("\n").length,r.next=13,l.saveImages(e.activity,n,o);case 13:return r.next=15,u.post("trainings",o);case 15:d=t.state.outstanding,g=d.findIndex(function(t){return e.key===t.key}),g>=0&&d.splice(g,1)&&(t.commit("outstanding",d),i["a"].set(f,d),l.cleanResource(e.key,n)),a(o),r.next=24;break;case 21:r.prev=21,r.t3=r["catch"](0),s(r.t3);case 24:case"end":return r.stop()}},r,this,[[0,21]])}));return function(t,e){return r.apply(this,arguments)}}())},saveEskalasi:function(t,e,n){return new Promise(function(){var r=a()(regeneratorRuntime.mark(function r(a,s){var o,d,g;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,o=e.data,r.t0=o.gps,r.t0){r.next=9;break}return r.t1=JSON,r.next=7,c["a"].getCurrentPosition();case 7:r.t2=r.sent,r.t0=r.t1.stringify.call(r.t1,r.t2);case 9:return o.gps=r.t0,r.next=12,l.saveImages(e.activity,n,o);case 12:return r.next=14,u.post("escalations",o);case 14:d=t.state.outstanding,g=d.findIndex(function(t){return e.key===t.key}),g>=0&&d.splice(g,1)&&(t.commit("outstanding",d),i["a"].set(f,d),l.cleanResource(e.key,n)),a(o),r.next=23;break;case 20:r.prev=20,r.t3=r["catch"](0),s(r.t3);case 23:case"end":return r.stop()}},r,this,[[0,20]])}));return function(t,e){return r.apply(this,arguments)}}())},saveVisibility:function(t,e,n){return new Promise(function(){var r=a()(regeneratorRuntime.mark(function r(a,s){var o,d,g,v,h;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,o=e.data,d=e.key,g=d.split(".")[2],r.t0=o.gps,r.t0){r.next=10;break}return r.t1=JSON,r.next=8,c["a"].getCurrentPosition();case 8:r.t2=r.sent,r.t0=r.t1.stringify.call(r.t1,r.t2);case 10:return o.gps=r.t0,o.activity_id=g,o.visit_checkin&&(o.start_date=o.start_date||o.visit_checkin,delete o.visit_checkin),o.visit_gps&&(o.gps=o.gps||o.visit_gps,delete o.visit_gps),r.next=16,l.saveImages(e.activity,n,o);case 16:return r.next=18,u.post("visibilities",o);case 18:v=t.state.outstanding,h=v.findIndex(function(t){return e.key===t.key}),h>=0&&v.splice(h,1)&&(t.commit("outstanding",v),i["a"].set(f,v),l.cleanResourceVisibility(e.key,g,n)),a(o),r.next=27;break;case 24:r.prev=24,r.t3=r["catch"](0),s(r.t3);case 27:case"end":return r.stop()}},r,this,[[0,24]])}));return function(t,e){return r.apply(this,arguments)}}())},saveImages:function(t,e,n){return new Promise(function(){var r=a()(regeneratorRuntime.mark(function r(a,i){var s,c,o,f;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,s="".concat(Date.now()),c=0;case 3:if(!(c<e.length)){r.next=14;break}if(n["pic_".concat(c+1)]){r.next=11;break}if(o=e[c],!(o.length>100)){r.next=11;break}return r.next=9,u.post("buckets",{data:o,folder:t,name:"".concat(s).concat(c+1)});case 9:f=r.sent,n["pic_".concat(c+1)]="read/".concat(f.data.id);case 11:c+=1,r.next=3;break;case 14:a(n),r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](0),i(r.t0);case 20:case"end":return r.stop()}},r,this,[[0,17]])}));return function(t,e){return r.apply(this,arguments)}}())},cleanResource:function(t,e){var n={TRA:"training",ESC:"eskalasi"},r=t.split(".")[0].toLowerCase(),a=n[t.split(".")[1]],s=i["a"].get.item(r);if(s&&s.visit&&s.visit[a]){var c=s.visit[a];c&&c.key===t&&(delete s.visit[a],i["a"].set(r,s))}for(var o=1;o<=e.length;o+=1)i["a"].remove("".concat(t,".").concat(o))},cleanResourceVisibility:function(t,e,n){var r=t.split(".")[0].toLowerCase(),a=i["a"].get.item(r);if(a&&a.visit&&a.visit.visibility){var s=a.visit.visibility[e];s&&s.key===t&&(delete a.visit.visibility[e],i["a"].set(r,a))}for(var c=1;c<=n.length;c+=1)i["a"].remove("".concat(t,".").concat(c))},cleanImage:function(t,e){for(var n=1;n<=e.length;n+=1)i["a"].remove("".concat(t,".").concat(n))}};e["a"]=l},f40f:function(t,e,n){"use strict";var r=n("9635"),a=n.n(r);a.a},f490:function(t,e,n){"use strict";n("28a5"),n("4917"),n("cadf"),n("456d"),n("ac6a"),n("a481");var r=n("73f5"),a=n("177b"),i=n("b157"),s=864e5,c=36e5,o=6e4,u=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,f=/^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]{6})?$/;function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;return n+Object(a["d"])(i)+e+Object(a["d"])(s)}function d(t,e){var n=new Date(t.getFullYear(),e,0,0,0,0,0),r=n.getDate();t.setMonth(e-1,Math.min(r,t.getDate()))}function g(t){return new Date(Object(r["c"])(t)&&null!==f.exec(t)?t.substring(0,23).replace(" ","T"):t)}function v(t,e,n){var r=g(t),i=n?1:-1;return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":Object(a["b"])("days"===t?"date":t);r["set".concat(n)](r["get".concat(n)]()+i*e[t])}else d(r,r.getMonth()+1+i*e.month)}),r}function h(t){if("number"===typeof t)return!0;var e=Date.parse(t);return!1===isNaN(e)}function m(t,e){return k(new Date,t,e)}function p(t){var e=g(t).getDay();return 0===e?7:e}function y(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var a=(e-n)/(7*s);return 1+Math.floor(a)}function b(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=g(e).getTime(),i=g(n).getTime(),s=g(t).getTime();return r.inclusiveFrom&&a--,r.inclusiveTo&&i++,s>a&&s<i}function D(t,e){return v(t,e,!0)}function w(t,e){return v(t,e,!1)}function k(t,e,n){var r=g(t),a="set".concat(n?"UTC":"");return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":t.charAt(0).toUpperCase()+t.slice(1);r["".concat(a).concat(n)](e[t])}else d(r,e.month)}),r}function x(t,e){var n=g(t);switch(e){case"year":n.setMonth(0);case"month":n.setDate(1);case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}return n}function _(t,e){var n=g(t);switch(e){case"year":n.setMonth(11);case"month":n.setDate(F(t));case"day":n.setHours(23);case"hour":n.setMinutes(59);case"minute":n.setSeconds(59);case"second":n.setMilliseconds(59)}return n}function M(t){for(var e=g(t),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach(function(t){e=Math.max(e,g(t))}),e}function O(t){for(var e=g(t),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach(function(t){e=Math.min(e,g(t))}),e}function S(t,e,n){return(t.getTime()-t.getTimezoneOffset()*o-(e.getTime()-e.getTimezoneOffset()*o))/n}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"days",r=g(t),a=g(e);switch(n){case"years":return r.getFullYear()-a.getFullYear();case"months":return 12*(r.getFullYear()-a.getFullYear())+r.getMonth()-a.getMonth();case"days":return S(x(r,"day"),x(a,"day"),s);case"hours":return S(x(r,"hour"),x(a,"hour"),c);case"minutes":return S(x(r,"minute"),x(a,"minute"),o);case"seconds":return S(x(r,"second"),x(a,"second"),1e3)}}function Y(t){return T(t,x(t,"year"),"days")+1}function j(t){return Object(r["a"])(t)?"date":"number"===typeof t?"number":"string"}function $(t,e,n){if(t||0===t)switch(e){case"date":return t;case"number":return t.getTime();default:return H(t,n)}}function q(t,e,n){var r=g(t);if(e){var a=g(e);if(r<a)return a}if(n){var i=g(n);if(r>i)return i}return r}function R(t,e,n){var r=g(t),a=g(e);if(void 0===n)return r.getTime()===a.getTime();switch(n){case"second":if(r.getSeconds()!==a.getSeconds())return!1;case"minute":if(r.getMinutes()!==a.getMinutes())return!1;case"hour":if(r.getHours()!==a.getHours())return!1;case"day":if(r.getDate()!==a.getDate())return!1;case"month":if(r.getMonth()!==a.getMonth())return!1;case"year":if(r.getFullYear()!==a.getFullYear())return!1;break;default:throw new Error("date isSameDate unknown unit ".concat(n))}return!0}function F(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function I(t){if(t>=11&&t<=13)return"".concat(t,"th");switch(t%10){case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd")}return"".concat(t,"th")}var C={YY:function(t){return Object(a["d"])(t.getFullYear(),4).substr(2)},YYYY:function(t){return Object(a["d"])(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Object(a["d"])(t.getMonth()+1)},MMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNamesShort||i["a"].lang.date.monthsShort)[t.getMonth()]},MMMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNames||i["a"].lang.date.months)[t.getMonth()]},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},Qo:function(t){return I(this.Q(t))},D:function(t){return t.getDate()},Do:function(t){return I(t.getDate())},DD:function(t){return Object(a["d"])(t.getDate())},DDD:function(t){return Y(t)},DDDD:function(t){return Object(a["d"])(Y(t),3)},d:function(t){return t.getDay()},dd:function(t){return this.dddd(t).slice(0,2)},ddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNamesShort||i["a"].lang.date.daysShort)[t.getDay()]},dddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNames||i["a"].lang.date.days)[t.getDay()]},E:function(t){return t.getDay()||7},w:function(t){return y(t)},ww:function(t){return Object(a["d"])(y(t))},H:function(t){return t.getHours()},HH:function(t){return Object(a["d"])(t.getHours())},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return Object(a["d"])(this.h(t))},m:function(t){return t.getMinutes()},mm:function(t){return Object(a["d"])(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return Object(a["d"])(t.getSeconds())},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Object(a["d"])(Math.floor(t.getMilliseconds()/10))},SSS:function(t){return Object(a["d"])(t.getMilliseconds(),3)},A:function(t){return this.H(t)<12?"AM":"PM"},a:function(t){return this.H(t)<12?"am":"pm"},aa:function(t){return this.H(t)<12?"a.m.":"p.m."},Z:function(t){return l(t.getTimezoneOffset(),":")},ZZ:function(t){return l(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DDTHH:mm:ss.SSSZ",n=arguments.length>2?arguments[2]:void 0;if(0===t||t){var r=g(t);return e.replace(u,function(t,e){return t in C?C[t](r,n):void 0===e?t:e.split("\\]").join("]")})}}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match(u)}function N(t){return Object(r["a"])(t)?new Date(t.getTime()):t}e["a"]={isValid:h,buildDate:m,getDayOfWeek:p,getWeekOfYear:y,isBetweenDates:b,addToDate:D,subtractFromDate:w,adjustDate:k,startOfDate:x,endOfDate:_,getMaxDate:M,getMinDate:O,getDateDiff:T,getDayOfYear:Y,inferDateFormat:j,convertDateToFormat:$,getDateBetween:q,isSameDate:R,daysInMonth:F,formatter:C,formatDate:H,matchFormat:E,clone:N}}}]);