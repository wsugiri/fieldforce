(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1d308f53"],{"33c0":function(t,e,n){"use strict";var r=n("a1593"),i=n.n(r);i.a},"4d57":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-stores"},[n("q-card",[n("q-card-main",[n("q-icon",{attrs:{name:"fa fa-store"}}),t._v("\n      "+t._s("Total Store: "+t.list.length)+"\n    ")],1)],1),t._l(t.list,function(e,r){return n("q-card",{key:r},[n("q-card-main",{staticClass:"text-weight-light"},[n("div",{staticClass:"store store-name text-weight-medium"},[n("q-icon",{attrs:{name:"fa fa-building"}}),t._v("\n        "+t._s(e.store_name)+"\n      ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map"}}),t._v("\n        "+t._s(e.area_manage)+"\n      ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map-marker"}}),t._v("\n        "+t._s(e.region_name)+"\n      ")],1),e.last_visit?n("div",{staticClass:"store store-last-visit text-italic"},[n("q-icon",{attrs:{name:"fa fa-calendar-check"}}),t._v("\n        "+t._s(e.last_visit)+"\n      ")],1):t._e(),e.dirty?n("div",{staticClass:"store text-italic text-warning"},[n("q-icon",{attrs:{name:"fa fa-info"}}),t._v("pending sync\n      ")],1):t._e(),n("q-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"},on:{click:function(n){t.checkIn(e)}}},[t._v("Check In")])],1)],1)})],2)},i=[];r._withStripped=!0;n("96cf");var a=n("c973"),s=n.n(a),c=n("5014"),o=n("49c2"),u={data:function(){return{opened:!1,model:{},store:{},list:[]}},created:function(){var t=s()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].me();case 2:e=t.sent,e?this.refresh():this.$router.push({name:"login"});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{refresh:function(){var t=s()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].list();case 2:this.list=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),detail:function(){var t=s()(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=(new Date).toISOString().substr(0,23),t.t1=JSON,t.next=4,o["a"].getCurrentPosition();case 4:t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.t4=navigator.onLine?1:0,t.t5=e.store_id,n={visit_checkin:t.t0,visit_gps:t.t3,visit_isonline:t.t4,store_id:t.t5},e.visit=n,this.checkIn(e);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),checkIn:function(){var t=s()(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].findById(e.store_id);case 2:if(n=t.sent,r=n.store,r.visit){t.next=15;break}return r=e,t.t0=(new Date).toISOString().substr(0,23),t.t1=JSON,t.next=10,o["a"].getCurrentPosition();case 10:t.t2=t.sent,t.t3=t.t1.stringify.call(t.t1,t.t2),t.t4=navigator.onLine?1:0,t.t5=e.store_id,r.visit={visit_checkin:t.t0,visit_gps:t.t3,visit_isonline:t.t4,store_id:t.t5};case 15:return t.next=17,c["a"].checkIn(r);case 17:this.$router.push({name:"checkin",params:{id:r.store_id}});case 18:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},f=u,v=(n("33c0"),n("d48f"),n("2877")),p=Object(v["a"])(f,r,i,!1,null,"a17e1188",null);p.options.__file="stores.vue";e["default"]=p.exports},5014:function(t,e,n){"use strict";n("7514"),n("96cf");var r=n("c973"),i=n.n(r),a=(n("551c"),n("f9d8")),s=n("f61f"),c=n("af13"),o=s["a"].init(),u=o.axios,f="data-stores",v={stores:function(){return a["a"].get.item(f)}};e["a"]={list:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=v.stores(),!navigator.onLine||r){t.next=8;break}return i="stores/store_allocate_mobile",t.next=6,u.get(i);case 6:s=t.sent,a["a"].set(f,s.data.list);case 8:e(v.stores()),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),n(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e,n){return t.apply(this,arguments)}}())},findById:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=a["a"].get.item(t),i||(i=v.stores().find(function(e){return e.store_id===t})),e.next=5,c["a"].list();case 5:s=e.sent,n({store:i,activities:s}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),r(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}())},checkIn:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,s,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=t.visit,s=a["a"].get.item(t.store_id),s||a["a"].set(t.store_id,t),!navigator.onLine||i.visit_id){e.next=11;break}return e.next=7,u.post("activityvisit",i);case 7:c=e.sent,o=c.data,i.visit_id=o.id,a["a"].set(t.store_id,t);case 11:n(t),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),r(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,n){return e.apply(this,arguments)}}())},checkOut:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=t.visit,!i||!i.visit_id){e.next=12;break}if(s=(new Date).toISOString().substr(0,23),i.visit_checkout=s,!navigator.onLine){e.next=11;break}return e.next=8,u.put("activityvisit/".concat(i.visit_id),{visit_checkout:s});case 8:a["a"].remove(t.store_id),e.next=12;break;case 11:a["a"].set(t.store_id,t);case 12:n(t),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),r(e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}())}}},"54c2":function(t,e,n){},a1593:function(t,e,n){},af13:function(t,e,n){"use strict";n("7514"),n("ac6a"),n("96cf");var r=n("c973"),i=n.n(r),a=(n("551c"),n("f9d8")),s=n("f61f"),c=s["a"].init(),o=c.axios,u="data-activity",f={list:function(){return a["a"].get.item(u)}},v={list:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=f.list(),!navigator.onLine||r){t.next=10;break}return i="activities/list",t.next=6,o.get(i);case 6:s=t.sent,r=s.data.list.filter(function(t){return""===(t.parent||"")}),r.forEach(function(t){t.subs=s.data.list.filter(function(e){return e.parent===t.activity_name})}),a["a"].set(u,r);case 10:e(f.list()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),n(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e,n){return t.apply(this,arguments)}}())},findOne:function(t,e){return new Promise(function(){var n=i()(regeneratorRuntime.mark(function n(r,i){var s,c;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:try{s=a["a"].get.item(t),c=f.list().find(function(t){return t.activity_id===e}),r({store:s,activity:c})}catch(t){i(t)}case 1:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}())}};e["a"]=v},d48f:function(t,e,n){"use strict";var r=n("54c2"),i=n.n(r);i.a}}]);