(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["52a37bc1"],{"0c3d":function(t,e,n){},"254e":function(t,e,n){"use strict";var r=n("0c3d"),i=n.n(r);i.a},"45ec":function(t,e,n){"use strict";var r=n("91cf"),i=n.n(r);i.a},4871:function(t,e,n){"use strict";var r=n("9d81"),i=n.n(r);i.a},4917:function(t,e,n){"use strict";var r=n("cb7c"),i=n("9def"),a=n("0390"),s=n("5f1b");n("214f")("match",1,function(t,e,n,o){return[function(n){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=o(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return s(c,u);var f=c.unicode;c.lastIndex=0;var l,d=[],v=0;while(null!==(l=s(c,u))){var h=String(l[0]);d[v]=h,""===h&&(c.lastIndex=a(u,i(c.lastIndex),f)),v++}return 0===v?null:d}]})},5014:function(t,e,n){"use strict";n("ac6a"),n("cadf"),n("456d"),n("7514"),n("96cf");var r=n("c973"),i=n.n(r),a=(n("551c"),n("f9d8")),s=n("f61f"),o=n("af13"),c=n("49c2"),u=s["a"].init(),f=u.axios,l="data-stores",d={stores:function(){return a["a"].get.item(l)}},v={list:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=d.stores(),!navigator.onLine||r){t.next=8;break}return i="stores/store_allocate_mobile",t.next=6,f.get(i);case 6:s=t.sent,a["a"].set(l,s.data.list);case 8:e(d.stores()),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),n(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e,n){return t.apply(this,arguments)}}())},listRefresh:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r="stores/store_allocate_mobile",t.next=4,f.get(r);case 4:i=t.sent,a["a"].set(l,i.data.list),e(d.stores()),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),n(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,n){return t.apply(this,arguments)}}())},findById:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=a["a"].get.item(t),i||(i=d.stores().find(function(e){return e.store_id===t})),e.next=5,o["a"].list();case 5:s=e.sent,n({store:i,activities:s}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),r(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}())},checkInOld:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=t.visit,s=a["a"].get.item(t.store_id),s||a["a"].set(t.store_id,t),!navigator.onLine||i.visit_id){e.next=11;break}return e.next=7,f.post("activityvisit",i);case 7:o=e.sent,c=o.data,i.visit_id=c.id,a["a"].set(t.store_id,t);case 11:n(t),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),r(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,n){return e.apply(this,arguments)}}())},checkIn:function(t,e){t.commit("store",e);var n=e.visit;return n||(n={visit_checkin:(new Date).toISOString().substr(0,23),visit_isonline:navigator.onLine?1:0,store_id:e.store_id},e.visit=n),a["a"].set(e.store_id,e),new Promise(function(){var r=i()(regeneratorRuntime.mark(function r(i,s){var o,u,l,d,v,h,g;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.t0=JSON,r.next=4,c["a"].getCurrentPosition();case 4:if(r.t1=r.sent,n.visit_gps=r.t0.stringify.call(r.t0,r.t1),!navigator.onLine||n.visit_id){r.next=16;break}for(o={},u=Object.keys(n),l=["store_id","visit_checkin","visit_gps","visit_isonline"],d=0;d<u.length;d+=1)v=u[d],l.indexOf(v)>=0&&(o[v]=n[v]);return r.next=13,f.post("activityvisit",o);case 13:h=r.sent,g=h.data,n.visit_id=g.id;case 16:t.commit("store",e),a["a"].set(e.store_id,e),i(e),r.next=24;break;case 21:r.prev=21,r.t2=r["catch"](0),s(r.t2);case 24:case"end":return r.stop()}},r,this,[[0,21]])}));return function(t,e){return r.apply(this,arguments)}}())},checkOut:function(t,e){return new Promise(function(){var n=i()(regeneratorRuntime.mark(function n(r,i){var s,o;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,s=e.visit,!(navigator.onLine&&s&&s.visit_id)||s.visit_checkout){n.next=9;break}return o=(new Date).toISOString().substr(0,23),s.visit_checkout=o,n.next=7,f.put("activityvisit/".concat(s.visit_id),{visit_checkout:o});case 7:t.commit("store",e),a["a"].set(e.store_id,e);case 9:r(e),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](0),i(n.t0);case 15:case"end":return n.stop()}},n,this,[[0,12]])}));return function(t,e){return n.apply(this,arguments)}}())}};e["a"]=v},"91cf":function(t,e,n){},"9d81":function(t,e,n){},ad89:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"store-profile"},[n("div",{staticClass:"text-weight-light"},[n("div",{staticClass:"store store-name text-weight-medium"},[n("q-icon",{attrs:{name:"fa fa-building"}}),t._v("\n      "+t._s(t.store.store_name)+"\n    ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map"}}),t._v("\n      "+t._s(t.store.area_manage)+"\n    ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map-marker"}}),t._v("\n      "+t._s(t.store.region_name)+"\n    ")],1),t.store.last_visit?n("div",{staticClass:"store store-last-visit text-italic"},[n("q-icon",{attrs:{name:"fa fa-calendar-check"}}),t._v("\n      Kunjungan terakhir pada: "+t._s(t.lastVisit)+"\n    ")],1):t._e()])])},i=[];r._withStripped=!0;var a=n("f490"),s={props:{store:{type:Object,default:{}}},computed:{lastVisit:function(){return this.store.last_visit?a["a"].formatDate(this.store.last_visit,"YYYY-MM-DD HH:mm Z"):"--="}}},o=s,c=(n("254e"),n("2877")),u=Object(c["a"])(o,r,i,!1,null,null,null);u.options.__file="store_profile.vue";e["a"]=u.exports},ae68:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{staticClass:"page-visibilities"},[n("q-layout-header",[n("q-toolbar",{attrs:{color:"primary"}},[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"},on:{click:function(e){t.$router.go(-1)}}}),n("q-toolbar-title",[t._v("Visibility")])],1)],1),n("q-page-container",[n("q-page",[n("v-store-profile",{attrs:{store:t.store}}),t._l(t.activity.subs,function(e,r){return n("q-card",{key:r,nativeOn:{click:function(n){t.detail(e)}}},[n("q-card-main",[n("q-item",{attrs:{link:""}},[n("q-item-main",[t._v("\n              "+t._s(e.activity_name)+"\n              "),e.model?n("div",{staticClass:"q-caption text-weight-thin"},[t._v("terpasang: "+t._s(e.model.qty_items))]):t._e()]),n("div",{staticClass:"icon-visibility",class:e.model?"visited":""},[n("i",{staticClass:"fa fa-check"})])],1)],1)],1)})],2)],1)],1)},i=[];r._withStripped=!0;n("7514"),n("ac6a"),n("96cf");var a=n("c973"),s=n.n(a),o=(n("5014"),n("af13")),c=n("ad89"),u={components:{vStoreProfile:c["a"]},data:function(){return{store:{},activity:{}}},created:function(){this.refresh()},methods:{refresh:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,n,r,i,a,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$q,n=this.$route,e.loading.show(),r=n.params.id,t.next=5,o["a"].findOne(r,1);case 5:i=t.sent,a=i.store,s=i.activity,c=a.activities,c&&(s.subs||[]).forEach(function(t){var e=c.find(function(e){return e.activity_id===t.activity_id});e&&(t.model=e.model)}),this.store=a,this.activity=s,e.loading.hide();case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),detail:function(){var t=s()(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n={id:this.$route.params.id,vid:e.activity_id},this.$router.push({name:"visibility_visit",params:n});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},f=u,l=(n("45ec"),n("4871"),n("2877")),d=Object(l["a"])(f,r,i,!1,null,null,null);d.options.__file="visibility.vue";e["default"]=d.exports},af13:function(t,e,n){"use strict";n("7514"),n("ac6a"),n("96cf");var r=n("c973"),i=n.n(r),a=(n("551c"),n("f9d8")),s=n("f61f"),o=s["a"].init(),c=o.axios,u="data-activity",f={list:function(){return a["a"].get.item(u)}},l={list:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=f.list(),!navigator.onLine||r){t.next=10;break}return i="activities/list",t.next=6,c.get(i);case 6:s=t.sent,r=s.data.list.filter(function(t){return""===(t.parent||"")}),r.forEach(function(t){t.subs=s.data.list.filter(function(e){return e.parent===t.activity_name})}),a["a"].set(u,r);case 10:e(f.list()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),n(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e,n){return t.apply(this,arguments)}}())},findOne:function(t,e){return new Promise(function(){var n=i()(regeneratorRuntime.mark(function n(r,i){var s,o,u,l;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,s=a["a"].get.item(t),o=f.list().find(function(t){return t.activity_id===e}),!navigator.onLine){n.next=9;break}return u="visibilities/list?store_id=".concat(t),n.next=7,c.get(u);case 7:l=n.sent,s.activities=l.data.list;case 9:r({store:s,activity:o}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](0),i(n.t0);case 15:case"end":return n.stop()}},n,this,[[0,12]])}));return function(t,e){return n.apply(this,arguments)}}())}};e["a"]=l},f490:function(t,e,n){"use strict";n("28a5"),n("4917"),n("cadf"),n("456d"),n("ac6a"),n("a481");var r=n("73f5"),i=n("177b"),a=n("b157"),s=864e5,o=36e5,c=6e4,u=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,f=/^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]{6})?$/;function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t>0?"-":"+",r=Math.abs(t),a=Math.floor(r/60),s=r%60;return n+Object(i["d"])(a)+e+Object(i["d"])(s)}function d(t,e){var n=new Date(t.getFullYear(),e,0,0,0,0,0),r=n.getDate();t.setMonth(e-1,Math.min(r,t.getDate()))}function v(t){return new Date(Object(r["c"])(t)&&null!==f.exec(t)?t.substring(0,23).replace(" ","T"):t)}function h(t,e,n){var r=v(t),a=n?1:-1;return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":Object(i["b"])("days"===t?"date":t);r["set".concat(n)](r["get".concat(n)]()+a*e[t])}else d(r,r.getMonth()+1+a*e.month)}),r}function g(t){if("number"===typeof t)return!0;var e=Date.parse(t);return!1===isNaN(e)}function m(t,e){return D(new Date,t,e)}function p(t){var e=v(t).getDay();return 0===e?7:e}function w(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var i=(e-n)/(7*s);return 1+Math.floor(i)}function b(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=v(e).getTime(),a=v(n).getTime(),s=v(t).getTime();return r.inclusiveFrom&&i--,r.inclusiveTo&&a++,s>i&&s<a}function y(t,e){return h(t,e,!0)}function _(t,e){return h(t,e,!1)}function D(t,e,n){var r=v(t),i="set".concat(n?"UTC":"");return Object.keys(e).forEach(function(t){if("month"!==t){var n="year"===t?"FullYear":t.charAt(0).toUpperCase()+t.slice(1);r["".concat(i).concat(n)](e[t])}else d(r,e.month)}),r}function M(t,e){var n=v(t);switch(e){case"year":n.setMonth(0);case"month":n.setDate(1);case"day":n.setHours(0);case"hour":n.setMinutes(0);case"minute":n.setSeconds(0);case"second":n.setMilliseconds(0)}return n}function x(t,e){var n=v(t);switch(e){case"year":n.setMonth(11);case"month":n.setDate(q(t));case"day":n.setHours(23);case"hour":n.setMinutes(59);case"minute":n.setSeconds(59);case"second":n.setMilliseconds(59)}return n}function k(t){for(var e=v(t),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(t){e=Math.max(e,v(t))}),e}function O(t){for(var e=v(t),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(t){e=Math.min(e,v(t))}),e}function Y(t,e,n){return(t.getTime()-t.getTimezoneOffset()*c-(e.getTime()-e.getTimezoneOffset()*c))/n}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"days",r=v(t),i=v(e);switch(n){case"years":return r.getFullYear()-i.getFullYear();case"months":return 12*(r.getFullYear()-i.getFullYear())+r.getMonth()-i.getMonth();case"days":return Y(M(r,"day"),M(i,"day"),s);case"hours":return Y(M(r,"hour"),M(i,"hour"),o);case"minutes":return Y(M(r,"minute"),M(i,"minute"),c);case"seconds":return Y(M(r,"second"),M(i,"second"),1e3)}}function j(t){return S(t,M(t,"year"),"days")+1}function T(t){return Object(r["a"])(t)?"date":"number"===typeof t?"number":"string"}function R(t,e,n){if(t||0===t)switch(e){case"date":return t;case"number":return t.getTime();default:return P(t,n)}}function H(t,e,n){var r=v(t);if(e){var i=v(e);if(r<i)return i}if(n){var a=v(n);if(r>a)return a}return r}function F(t,e,n){var r=v(t),i=v(e);if(void 0===n)return r.getTime()===i.getTime();switch(n){case"second":if(r.getSeconds()!==i.getSeconds())return!1;case"minute":if(r.getMinutes()!==i.getMinutes())return!1;case"hour":if(r.getHours()!==i.getHours())return!1;case"day":if(r.getDate()!==i.getDate())return!1;case"month":if(r.getMonth()!==i.getMonth())return!1;case"year":if(r.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error("date isSameDate unknown unit ".concat(n))}return!0}function q(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function C(t){if(t>=11&&t<=13)return"".concat(t,"th");switch(t%10){case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd")}return"".concat(t,"th")}var E={YY:function(t){return Object(i["d"])(t.getFullYear(),4).substr(2)},YYYY:function(t){return Object(i["d"])(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Object(i["d"])(t.getMonth()+1)},MMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNamesShort||a["a"].lang.date.monthsShort)[t.getMonth()]},MMMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNames||a["a"].lang.date.months)[t.getMonth()]},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},Qo:function(t){return C(this.Q(t))},D:function(t){return t.getDate()},Do:function(t){return C(t.getDate())},DD:function(t){return Object(i["d"])(t.getDate())},DDD:function(t){return j(t)},DDDD:function(t){return Object(i["d"])(j(t),3)},d:function(t){return t.getDay()},dd:function(t){return this.dddd(t).slice(0,2)},ddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNamesShort||a["a"].lang.date.daysShort)[t.getDay()]},dddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNames||a["a"].lang.date.days)[t.getDay()]},E:function(t){return t.getDay()||7},w:function(t){return w(t)},ww:function(t){return Object(i["d"])(w(t))},H:function(t){return t.getHours()},HH:function(t){return Object(i["d"])(t.getHours())},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return Object(i["d"])(this.h(t))},m:function(t){return t.getMinutes()},mm:function(t){return Object(i["d"])(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return Object(i["d"])(t.getSeconds())},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Object(i["d"])(Math.floor(t.getMilliseconds()/10))},SSS:function(t){return Object(i["d"])(t.getMilliseconds(),3)},A:function(t){return this.H(t)<12?"AM":"PM"},a:function(t){return this.H(t)<12?"am":"pm"},aa:function(t){return this.H(t)<12?"a.m.":"p.m."},Z:function(t){return l(t.getTimezoneOffset(),":")},ZZ:function(t){return l(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DDTHH:mm:ss.SSSZ",n=arguments.length>2?arguments[2]:void 0;if(0===t||t){var r=v(t);return e.replace(u,function(t,e){return t in E?E[t](r,n):void 0===e?t:e.split("\\]").join("]")})}}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match(u)}function $(t){return Object(r["a"])(t)?new Date(t.getTime()):t}e["a"]={isValid:g,buildDate:m,getDayOfWeek:p,getWeekOfYear:w,isBetweenDates:b,addToDate:y,subtractFromDate:_,adjustDate:D,startOfDate:M,endOfDate:x,getMaxDate:k,getMinDate:O,getDateDiff:S,getDayOfYear:j,inferDateFormat:T,convertDateToFormat:R,getDateBetween:H,isSameDate:F,daysInMonth:q,formatter:E,formatDate:P,matchFormat:I,clone:$}}}]);