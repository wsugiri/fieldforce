(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["740ffe78"],{"0743":function(t,e,i){},"0831":function(t,e,i){"use strict";var n=i("0743"),r=i.n(n);r.a},"0c3d":function(t,e,i){},1142:function(t,e,i){"use strict";var n=i("c2aa"),r=i.n(n);r.a},2353:function(t,e,i){"use strict";var n=i("ea8d"),r=i.n(n);r.a},"254e":function(t,e,i){"use strict";var n=i("0c3d"),r=i.n(n);r.a},"297f":function(t,e,i){},"2d5c":function(t,e,i){},4917:function(t,e,i){"use strict";var n=i("cb7c"),r=i("9def"),a=i("0390"),s=i("5f1b");i("214f")("match",1,function(t,e,i,o){return[function(i){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=o(i,t,this);if(e.done)return e.value;var c=n(t),u=String(this);if(!c.global)return s(c,u);var l=c.unicode;c.lastIndex=0;var d,f=[],v=0;while(null!==(d=s(c,u))){var m=String(d[0]);f[v]=m,""===m&&(c.lastIndex=a(u,r(c.lastIndex),l)),v++}return 0===v?null:f}]})},5014:function(t,e,i){"use strict";i("ac6a"),i("cadf"),i("456d"),i("7514"),i("96cf");var n=i("c973"),r=i.n(n),a=(i("551c"),i("f61f")),s=a["a"].init(),o=s.axios,c="data-stores",u={stores:function(){var t=localStorage.getItem(c);return t?JSON.parse(t):[]},setStores:function(t){localStorage.setItem(c,JSON.stringify(t))}},l=function(t){return new Promise(function(){var e=r()(regeneratorRuntime.mark(function e(i,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.store_id){e.next=5;break}i("update"),e.next=12;break;case 5:return e.next=7,o.post("activityvisit",t.visit);case 7:r=e.sent,a=r.data,t.visit.visit_id=a.id,t.dirty=0,i(a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),n(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,i){return e.apply(this,arguments)}}())},d=function(t){return new Promise(function(){var e=r()(regeneratorRuntime.mark(function e(i,n){var r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.visit.visit_id,e.next=4,o.put("activityvisit/".concat(r),{visit_checkout:t.visit.visit_checkout});case 4:a=e.sent,s=a.data,t.visit.id=s.id,t.dirty=0,i(s),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),n(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,i){return e.apply(this,arguments)}}())};e["a"]={list:function(){return new Promise(function(){var t=r()(regeneratorRuntime.mark(function t(e,i){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=u.stores(),!navigator.onLine||n.length){t.next=8;break}return r="stores/store_allocate_mobile",t.next=6,o.get(r);case 6:a=t.sent,u.setStores(a.data.list);case 8:e(u.stores()),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),i(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e,i){return t.apply(this,arguments)}}())},findById:function(t){return new Promise(function(e,i){try{var n=u.stores(),r=n.filter(function(e){return e.store_id===t});e(r[0])}catch(t){i(t)}})},update:function(t){return new Promise(function(){var e=r()(regeneratorRuntime.mark(function e(i,n){var r,a,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=u.stores(),a=r.find(function(e){return e.store_id===t.store_id}),a)for(s=Object.keys(t),o=0;o<s.length;o+=1)c=s[o],a[c]=t[c];if(!a.visit||!navigator.onLine){e.next=7;break}return e.next=7,l(a);case 7:u.setStores(r),i(a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),n(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,i){return e.apply(this,arguments)}}())},updateStore:function(t){var e=u.stores(),i=e.find(function(e){return e.store_id===t.store_id});if(i)for(var n=Object.keys(t),r=0;r<n.length;r+=1){var a=n[r];i[a]=t[a]}u.setStores(e)},checkOut:function(t){return new Promise(function(){var e=r()(regeneratorRuntime.mark(function e(i,n){var r,a,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r=u.stores(),a=r.find(function(e){return e.store_id===t.store_id}),a)for(s=Object.keys(t),o=0;o<s.length;o+=1)c=s[o],a[c]=t[c];if(!a.visit||!navigator.onLine){e.next=7;break}return e.next=7,d(a);case 7:u.setStores(r),i(a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),n(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,i){return e.apply(this,arguments)}}())}}},"5ee8":function(t,e,i){},"84a3":function(t,e,i){},"9bd1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"store-detail"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title"),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.checkIn()}}},[t._v("Check In")])],1),i("q-page",[i("q-carousel",{attrs:{color:"white",arrows:"","quick-nav":"",height:"300px"}},t._l(t.images,function(t,e){return i("q-carousel-slide",{key:e,attrs:{"img-src":t}})})),i("div",{staticClass:"store-profile"},[i("v-store-profile",{attrs:{store:t.store}})],1)],1),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.activity,callback:function(e){t.activity=e},expression:"activity"}},[i("q-modal-layout",[i("v-activity",{attrs:{store:t.store}})],1)],1)],1)},r=[];n._withStripped=!0;i("ac6a"),i("96cf");var a=i("c973"),s=i.n(a),o=(i("28a5"),i("4917"),i("cadf"),i("456d"),i("a481"),i("73f5")),c=i("177b"),u=i("b157"),l=864e5,d=36e5,f=6e4,v=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,m=/^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]{6})?$/;function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t>0?"-":"+",n=Math.abs(t),r=Math.floor(n/60),a=n%60;return i+Object(c["d"])(r)+e+Object(c["d"])(a)}function g(t,e){var i=new Date(t.getFullYear(),e,0,0,0,0,0),n=i.getDate();t.setMonth(e-1,Math.min(n,t.getDate()))}function p(t){return new Date(Object(o["c"])(t)&&null!==m.exec(t)?t.substring(0,23).replace(" ","T"):t)}function b(t,e,i){var n=p(t),r=i?1:-1;return Object.keys(e).forEach(function(t){if("month"!==t){var i="year"===t?"FullYear":Object(c["b"])("days"===t?"date":t);n["set".concat(i)](n["get".concat(i)]()+r*e[t])}else g(n,n.getMonth()+1+r*e.month)}),n}function k(t){if("number"===typeof t)return!0;var e=Date.parse(t);return!1===isNaN(e)}function _(t,e){return S(new Date,t,e)}function y(t){var e=p(t).getDay();return 0===e?7:e}function w(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var i=new Date(e.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);var n=e.getTimezoneOffset()-i.getTimezoneOffset();e.setHours(e.getHours()-n);var r=(e-i)/(7*l);return 1+Math.floor(r)}function q(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=p(e).getTime(),a=p(i).getTime(),s=p(t).getTime();return n.inclusiveFrom&&r--,n.inclusiveTo&&a++,s>r&&s<a}function x(t,e){return b(t,e,!0)}function D(t,e){return b(t,e,!1)}function S(t,e,i){var n=p(t),r="set".concat(i?"UTC":"");return Object.keys(e).forEach(function(t){if("month"!==t){var i="year"===t?"FullYear":t.charAt(0).toUpperCase()+t.slice(1);n["".concat(r).concat(i)](e[t])}else g(n,e.month)}),n}function O(t,e){var i=p(t);switch(e){case"year":i.setMonth(0);case"month":i.setDate(1);case"day":i.setHours(0);case"hour":i.setMinutes(0);case"minute":i.setSeconds(0);case"second":i.setMilliseconds(0)}return i}function j(t,e){var i=p(t);switch(e){case"year":i.setMonth(11);case"month":i.setDate(I(t));case"day":i.setHours(23);case"hour":i.setMinutes(59);case"minute":i.setSeconds(59);case"second":i.setMilliseconds(59)}return i}function M(t){for(var e=p(t),i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach(function(t){e=Math.max(e,p(t))}),e}function C(t){for(var e=p(t),i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return n.forEach(function(t){e=Math.min(e,p(t))}),e}function R(t,e,i){return(t.getTime()-t.getTimezoneOffset()*f-(e.getTime()-e.getTimezoneOffset()*f))/i}function T(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"days",n=p(t),r=p(e);switch(i){case"years":return n.getFullYear()-r.getFullYear();case"months":return 12*(n.getFullYear()-r.getFullYear())+n.getMonth()-r.getMonth();case"days":return R(O(n,"day"),O(r,"day"),l);case"hours":return R(O(n,"hour"),O(r,"hour"),d);case"minutes":return R(O(n,"minute"),O(r,"minute"),f);case"seconds":return R(O(n,"second"),O(r,"second"),1e3)}}function Y(t){return T(t,O(t,"year"),"days")+1}function P(t){return Object(o["a"])(t)?"date":"number"===typeof t?"number":"string"}function $(t,e,i){if(t||0===t)switch(e){case"date":return t;case"number":return t.getTime();default:return L(t,i)}}function H(t,e,i){var n=p(t);if(e){var r=p(e);if(n<r)return r}if(i){var a=p(i);if(n>a)return a}return n}function E(t,e,i){var n=p(t),r=p(e);if(void 0===i)return n.getTime()===r.getTime();switch(i){case"second":if(n.getSeconds()!==r.getSeconds())return!1;case"minute":if(n.getMinutes()!==r.getMinutes())return!1;case"hour":if(n.getHours()!==r.getHours())return!1;case"day":if(n.getDate()!==r.getDate())return!1;case"month":if(n.getMonth()!==r.getMonth())return!1;case"year":if(n.getFullYear()!==r.getFullYear())return!1;break;default:throw new Error("date isSameDate unknown unit ".concat(i))}return!0}function I(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function F(t){if(t>=11&&t<=13)return"".concat(t,"th");switch(t%10){case 1:return"".concat(t,"st");case 2:return"".concat(t,"nd");case 3:return"".concat(t,"rd")}return"".concat(t,"th")}var N={YY:function(t){return Object(c["d"])(t.getFullYear(),4).substr(2)},YYYY:function(t){return Object(c["d"])(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return Object(c["d"])(t.getMonth()+1)},MMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNamesShort||u["a"].lang.date.monthsShort)[t.getMonth()]},MMMM:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.monthNames||u["a"].lang.date.months)[t.getMonth()]},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},Qo:function(t){return F(this.Q(t))},D:function(t){return t.getDate()},Do:function(t){return F(t.getDate())},DD:function(t){return Object(c["d"])(t.getDate())},DDD:function(t){return Y(t)},DDDD:function(t){return Object(c["d"])(Y(t),3)},d:function(t){return t.getDay()},dd:function(t){return this.dddd(t).slice(0,2)},ddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNamesShort||u["a"].lang.date.daysShort)[t.getDay()]},dddd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.dayNames||u["a"].lang.date.days)[t.getDay()]},E:function(t){return t.getDay()||7},w:function(t){return w(t)},ww:function(t){return Object(c["d"])(w(t))},H:function(t){return t.getHours()},HH:function(t){return Object(c["d"])(t.getHours())},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return Object(c["d"])(this.h(t))},m:function(t){return t.getMinutes()},mm:function(t){return Object(c["d"])(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return Object(c["d"])(t.getSeconds())},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return Object(c["d"])(Math.floor(t.getMilliseconds()/10))},SSS:function(t){return Object(c["d"])(t.getMilliseconds(),3)},A:function(t){return this.H(t)<12?"AM":"PM"},a:function(t){return this.H(t)<12?"am":"pm"},aa:function(t){return this.H(t)<12?"a.m.":"p.m."},Z:function(t){return h(t.getTimezoneOffset(),":")},ZZ:function(t){return h(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DDTHH:mm:ss.SSSZ",i=arguments.length>2?arguments[2]:void 0;if(0===t||t){var n=p(t);return e.replace(v,function(t,e){return t in N?N[t](n,i):void 0===e?t:e.split("\\]").join("]")})}}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match(v)}function J(t){return Object(o["a"])(t)?new Date(t.getTime()):t}var A={isValid:k,buildDate:_,getDayOfWeek:y,getWeekOfYear:w,isBetweenDates:q,addToDate:x,subtractFromDate:D,adjustDate:S,startOfDate:O,endOfDate:j,getMaxDate:M,getMinDate:C,getDateDiff:T,getDayOfYear:Y,inferDateFormat:P,convertDateToFormat:$,getDateBetween:H,isSameDate:E,daysInMonth:I,formatter:N,formatDate:L,matchFormat:U,clone:J},W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"store-profile"},[i("div",{staticClass:"text-weight-light"},[i("div",{staticClass:"store store-name text-weight-medium"},[i("q-icon",{attrs:{name:"fa fa-building"}}),t._v("\n      "+t._s(t.store.store_name)+"\n    ")],1),i("div",{staticClass:"store store-location"},[i("q-icon",{attrs:{name:"fa fa-map"}}),t._v("\n      "+t._s(t.store.area_manage)+"\n    ")],1),i("div",{staticClass:"store store-location"},[i("q-icon",{attrs:{name:"fa fa-map-marker"}}),t._v("\n      "+t._s(t.store.region_name)+"\n    ")],1),t.store.last_visit?i("div",{staticClass:"store store-last-visit text-italic"},[i("q-icon",{attrs:{name:"fa fa-calendar-check"}}),t._v("\n      Kunjungan terakhir pada: "+t._s(t.lastVisit)+"\n    ")],1):t._e()])])},z=[];W._withStripped=!0;var V={props:{store:{type:Object,default:{}}},computed:{lastVisit:function(){return this.store.last_visit?A.formatDate(this.store.last_visit,"YYYY-MM-DD HH:mm Z"):"--="}}},Z=V,Q=(i("254e"),i("2877")),B=Object(Q["a"])(Z,W,z,!1,null,null,null);B.options.__file="store_profile.vue";var K=B.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"store-activity"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title"),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.checkOut()}}},[t._v("Check Out")])],1),i("q-page",[i("v-store-profile",{attrs:{store:t.store}}),i("q-list",{staticClass:"q-pt-none q-pb-none",attrs:{link:"",separator:"",sparse:""}},t._l(t.activities,function(e,n){return i("q-item",{key:n,nativeOn:{click:function(i){t.activityClick(e)}}},[i("q-item-main",[t._v(t._s(e.activity_name))]),i("q-item-side",{attrs:{right:"",icon:"keyboard_arrow_right"}})],1)}))],1),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.visibility,callback:function(e){t.visibility=e},expression:"visibility"}},[i("q-modal-layout",[i("v-visibility",{attrs:{store:t.store,list:t.subs}})],1)],1),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.training,callback:function(e){t.training=e},expression:"training"}},[i("q-modal-layout",[i("v-training",{attrs:{store:t.store},on:{close:function(e){t.training=!1}}})],1)],1),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.eskalasi,callback:function(e){t.eskalasi=e},expression:"eskalasi"}},[i("q-modal-layout",[i("v-eskalasi",{attrs:{store:t.store},on:{close:function(e){t.eskalasi=!1}}})],1)],1)],1)},G=[];X._withStripped=!0;i("b54a");var tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-visibilities"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"}}),i("q-toolbar-title",[t._v("Visibility")])],1),i("q-page",[i("v-store-profile",{attrs:{store:t.store}}),t._l(t.list,function(e,n){return i("q-card",{key:n,nativeOn:{click:function(i){t.showDetail(e)}}},[i("q-card-main",[i("q-item",{attrs:{link:""}},[i("q-item-main",[t._v("\n            "+t._s(e.activity_name)+"\n            "),e.model?i("div",{staticClass:"q-caption text-weight-thin"},[t._v("terpasang: "+t._s(e.model.qty_items))]):t._e()]),i("div",{staticClass:"icon-visibility",class:e.model?"visited":""},[i("i",{staticClass:"fa fa-check"})])],1)],1)],1)})],2),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.visibility_detail,callback:function(e){t.visibility_detail=e},expression:"visibility_detail"}},[i("q-modal-layout",[i("v-visibility-detail",{attrs:{store:t.store,item:t.item},on:{close:function(e){t.visibility_detail=!1}}})],1)],1)],1)},et=[];tt._withStripped=!0;var it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-visibily-detail"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[t._v("Visibility Detail")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.save()}}},[t._v("Save")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.cancel()}}},[t._v("Cancel")])],1),i("q-page",[i("v-store-profile",{attrs:{store:t.store}}),i("div",{staticClass:"card-visibility"},[i("q-card",[i("q-card-main",[i("q-field",{attrs:{icon:"important_devices",label:"Device Terpasang",helper:"masukkan jumlah device terpasang"}},[i("q-input",{model:{value:t.model.qty_items,callback:function(e){t.$set(t.model,"qty_items",e)},expression:"model.qty_items"}})],1)],1)],1),i("v-take-picture",{staticClass:"q-mt-sm",attrs:{images:t.images}})],1)],1)],1)},nt=[];it._withStripped=!0;i("6b54");var rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.images,function(e,n){return i("q-card",{key:n,staticClass:"bigger q-mt-md"},[i("q-card-title",{staticStyle:{padding:"5px 15px",height:"42px"}},[i("div",[t._v("Picture #"+t._s(n+1))])]),i("q-card-separator"),i("q-card-media",[i("img",{attrs:{src:e.src}})]),i("q-card-separator"),i("q-card-actions",[i("div",{staticClass:"text-center"},[i("q-btn",{attrs:{icon:"fa fa-camera",color:"primary"},on:{click:function(i){t.takingPicture(e)}}},[i("span",{staticClass:"q-ml-sm"},[t._v("Take Picture")])]),i("q-btn",{attrs:{icon:"fa fa-trash",color:"red"},on:{click:function(i){t.removePicture(e)}}},[i("span",{staticClass:"q-ml-sm"},[t._v("Remove Picture")])])],1)])],1)}),i("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.take_picture,callback:function(e){t.take_picture=e},expression:"take_picture"}},[i("q-modal-layout",[i("video",{ref:"video",staticStyle:{height:"auto",width:"100%"},attrs:{autoplay:""}}),i("div",{staticClass:"text-center"},[i("q-btn",{staticStyle:{top:"-15px",transform:"translateY(-100%)"},attrs:{round:"",icon:"camera",color:"blue",size:"lg"},on:{click:function(e){t.capturePicture()}}})],1),i("canvas",{ref:"canvas",staticStyle:{display:"none"}})])],1)],2)},at=[];rt._withStripped=!0;var st={images:{1:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg",2:"http://dkm.boogr-sooka.club/img/samples/CR-002.jpg",3:"http://dkm.boogr-sooka.club/img/samples/CR-003.jpg",4:"http://dkm.boogr-sooka.club/img/samples/CR-004.jpg",5:"http://dkm.boogr-sooka.club/img/samples/CR-005.jpg"}},ot={props:{images:{type:Array,default:[{id:1,src:st.images["1"]},{id:2,src:st.images["2"]},{id:3,src:st.images["3"]},{id:4,src:st.images["4"]}]}},data:function(){return{take_picture:!1}},methods:{takingPicture:function(t){var e=this;this.video=this.$refs.video,this.image=t,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(t){var i=window.URL||window.webkitURL;e.video.srcObject=t,e.video.src=i.createObjectURL(t)}),this.take_picture=!0},removePicture:function(t){t&&(t.src=st.images[t.id])},capturePicture:function(){this.take_picture=!1;var t=this.video,e=this.$refs.canvas;e.width=t.videoWidth,e.height=t.videoHeight;var i=e.getContext("2d");i.drawImage(t,0,0);var n=e.toDataURL("image/png");this.image.src=n,t.pause(),t.src="",t.srcObject.getTracks()[0].stop()},save:function(){console.log("close"),this.$emit("close")},cancel:function(){console.log("close"),this.$emit("close")}}},ct=ot,ut=Object(Q["a"])(ct,rt,at,!1,null,null,null);ut.options.__file="take_picture.vue";var lt=ut.exports,dt=i("5014"),ft=(i("551c"),i("f61f")),vt=ft["a"].init(),mt=vt.axios,ht={saveImage:function(t){return new Promise(function(){var e=s()(regeneratorRuntime.mark(function e(i,n){var r,a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{r=t.images,[],a="visibility",s="".concat(t.store_id,".").concat(t.activity_id),o=mt.post("buckets",{data:r[0],folder:a,name:"".concat(s,".1")}),i(o)}catch(t){n(t)}case 1:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}())}},gt={insert:function(t){return new Promise(function(){var e=s()(regeneratorRuntime.mark(function e(i,n){var r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!navigator.onLine){e.next=12;break}return r="visibilities",a={start_date:t.start_date,qty_items:t.qty_items,activity_id:t.activity_id,store_id:t.store_id,gps:t.gps,user_id:t.user_id,isonline:t.isonline},e.next=6,ht.saveImage(t);case 6:return s=e.sent,e.next=9,mt.post(r,a);case 9:i(s),e.next=13;break;case 12:i("offline");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),n(e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t,i){return e.apply(this,arguments)}}())}},pt={images:{1:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg",2:"http://dkm.boogr-sooka.club/img/samples/CR-002.jpg",3:"http://dkm.boogr-sooka.club/img/samples/CR-003.jpg",4:"http://dkm.boogr-sooka.club/img/samples/CR-004.jpg"}},bt={components:{vStoreProfile:K,vTakePicture:lt},props:{store:Object,item:Object},data:function(){return{take_picture:!1,images:[{id:1,src:pt.images[1]},{id:2,src:pt.images[2]},{id:3,src:pt.images[3]},{id:4,src:pt.images[4]}],model:{qty_items:1}}},watch:{model:{handler:function(t){this.images.forEach(function(e,i){var n="".concat(t.store_id,".").concat(t.activity_id,".").concat(i),r=localStorage.getItem(n);r&&r.length>100?e.src=r:e.src=pt.images[i+1]});var e=this;setTimeout(function(){e.$forceUpdate()},400)}},item:{handler:function(t){var e=t.model;e||(e={qty_items:1,pic_1:1,pic_2:1,pic_3:1,pic_4:1,isonline:navigator.onLine?1:0,start_date:(new Date).toISOString().substr(0,23),activity_id:t.activity_id});var i=this.store;i.visit&&(e.gps=i.visit.visit_gps),e.store_id||(e.store_id=i.store_id),e.start_date||(e.start_date=(new Date).toISOString().substr(0,23)),e.activity_id||(e.activity_id=t.activity_id),this.model=e},deep:!0}},computed:{},methods:{save:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,i,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],this.images.forEach(function(t){var i=t.src;i.length>100&&e.push(i)}),0!==e.length){t.next=5;break}return this.$q.notify("Silahkan masukkan minimal 1 foto"),t.abrupt("return");case 5:return i=this.model,e.forEach(function(t,e){localStorage.setItem("".concat(i.store_id,".").concat(i.activity_id,".").concat(e),t)}),i.images=e,this.item.model=i,n=JSON.parse(JSON.stringify(this.store)),dt["a"].update(n),t.prev=11,t.next=14,gt.insert(i);case 14:r=t.sent,this.$q.notify(JSON.stringify(r)),this.$emit("close"),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](11),this.$q.notify(t.t0.message);case 22:case"end":return t.stop()}},t,this,[[11,19]])}));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.$emit("close")},refresh:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){console.log(refresh)})}},kt=bt,_t=(i("ba2b"),Object(Q["a"])(kt,it,nt,!1,null,null,null));_t.options.__file="visibility_detail.vue";var yt=_t.exports,wt={components:{vStoreProfile:K,vVisibilityDetail:yt},props:{store:Object,list:Array},data:function(){return{item:{model:{}},visibility_detail:!1}},watch:{list:{handler:function(t){this.$forceUpdate()}},visibility_detail:{handler:function(t){if(t){var e=this;setTimeout(function(){e.$forceUpdate()},400)}}}},methods:{showDetail:function(t){this.store;this.item=t,this.visibility_detail=!0}}},qt=wt,xt=(i("df4e"),Object(Q["a"])(qt,tt,et,!1,null,null,null));xt.options.__file="visibility.vue";var Dt=xt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-training"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[t._v("Training")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.save()}}},[t._v("Save")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.cancel()}}},[t._v("Cancel")])],1),i("q-page",[i("v-store-profile",{attrs:{store:t.store}}),i("div",{staticClass:"card-training text-weight-light"},[i("q-card",[i("q-card-main",[i("q-field",{attrs:{icon:"important_devices",label:"Nama Training",helper:"masukkan jumlah nama training"}},[i("q-input",{model:{value:t.model.training,callback:function(e){t.$set(t.model,"training",e)},expression:"model.training"}})],1),i("q-field",{attrs:{icon:"fa fa-users",label:"Perserta Training",helper:"masukkan semua nama peserta training"}},[i("q-input",{attrs:{type:"textarea"},model:{value:t.model.list,callback:function(e){t.$set(t.model,"list",e)},expression:"model.list"}})],1)],1)],1),i("v-take-picture",{staticClass:"q-mt-sm",attrs:{images:t.images}})],1)],1)],1)},Ot=[];St._withStripped=!0;var jt={components:{vStoreProfile:K,vTakePicture:lt},props:{store:Object,default:{}},computed:{listPerserta:function(){var t=[];return this.model.list&&(t=this.model.list.split("\n")),t}},data:function(){return{images:[{id:1,src:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg"},{id:2,src:"http://dkm.boogr-sooka.club/img/samples/CR-002.jpg"},{id:3,src:"http://dkm.boogr-sooka.club/img/samples/CR-003.jpg"},{id:4,src:"http://dkm.boogr-sooka.club/img/samples/CR-004.jpg"}],model:{}}},methods:{save:function(){console.log("close"),this.$emit("close")},cancel:function(){console.log("close"),this.$emit("close")}}},Mt=jt,Ct=(i("1142"),Object(Q["a"])(Mt,St,Ot,!1,null,null,null));Ct.options.__file="training.vue";var Rt=Ct.exports,Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-eskalasi"},[i("q-toolbar",{attrs:{slot:"header"},slot:"header"},[i("q-toolbar-title",[t._v("Eskalasi")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.save()}}},[t._v("Save")]),i("q-btn",{attrs:{flat:""},on:{click:function(e){t.cancel()}}},[t._v("Cancel")])],1),i("q-page",[i("v-store-profile",{attrs:{store:t.store}}),i("div",{staticClass:"card-eskalasi"},[i("q-card",[i("q-card-main",[i("q-field",{attrs:{helper:"Pick one escalation",label:"Status"}},[i("q-option-group",{attrs:{type:"radio",color:"secondary","float-label":"Status",options:[{label:"Temporary",value:"bat"},{label:"Permanent",value:"friend"},{label:"Under Renovation",value:"upload"},{label:"Moved",value:"modev"}]},model:{value:t.model.status,callback:function(e){t.$set(t.model,"status",e)},expression:"model.status"}})],1),i("q-field",[i("q-input",{attrs:{"float-label":"Keterangan",type:"textarea"},model:{value:t.model.keterangan,callback:function(e){t.$set(t.model,"keterangan",e)},expression:"model.keterangan"}})],1)],1)],1),i("v-take-picture",{staticClass:"q-mt-sm",attrs:{images:t.images}})],1)],1)],1)},Yt=[];Tt._withStripped=!0;var Pt={components:{vStoreProfile:K,vTakePicture:lt},props:{store:Object,default:{}},data:function(){return{images:[{id:1,src:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg"},{id:2,src:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg"},{id:1,src:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg"},{id:2,src:"http://dkm.boogr-sooka.club/img/samples/CR-001.jpg"}],model:{}}},methods:{save:function(){console.log("close"),this.$emit("close")},cancel:function(){console.log("close"),this.$emit("close")}}},$t=Pt,Ht=(i("9de8"),Object(Q["a"])($t,Tt,Yt,!1,null,null,null));Ht.options.__file="eskalasi.vue";var Et=Ht.exports,It=ft["a"].init(),Ft=It.axios,Nt="data-activity",Lt={list:function(){var t=localStorage.getItem(Nt);return t?JSON.parse(t):[]},setList:function(t){localStorage.setItem(Nt,JSON.stringify(t))}},Ut={list:function(){return new Promise(function(){var t=s()(regeneratorRuntime.mark(function t(e,i){var n,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=Lt.list(),!navigator.onLine||0!==n.length){t.next=10;break}return r="activities/list",t.next=6,Ft.get(r);case 6:a=t.sent,n=a.data.list.filter(function(t){return""===(t.parent||"")}),n.forEach(function(t){t.subs=a.data.list.filter(function(e){return e.parent===t.activity_name})}),Lt.setList(n);case 10:e(Lt.list()),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),i(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e,i){return t.apply(this,arguments)}}())}},Jt={components:{vStoreProfile:K,vVisibility:Dt,vTraining:Rt,vEskalasi:Et},props:{store:Object},data:function(){return{visibility:!1,training:!1,eskalasi:!1,activities:[],subs:[]}},watch:{store:{handler:function(t){this.activities=t.activities;var e=this;setTimeout(function(){e.$forceUpdate()},400)},deep:!0}},methods:{checkOut:function(){var t=s()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.store,this.user,e.dirty=!0,e.visit&&(e.visit.visit_checkout=(new Date).toISOString().substr(0,23)),t.prev=3,t.next=6,dt["a"].checkOut(e);case 6:this.activity=!0,this.$router.push("/stores"),t.next=13;break;case 10:throw t.prev=10,t.t0=t["catch"](3),t.t0;case 13:case"end":return t.stop()}},t,this,[[3,10]])}));return function(){return t.apply(this,arguments)}}(),activityClick:function(t){this.subs=t.subs,void 0!=this[t.link]&&(this[t.link]=!0)}}},At=Jt,Wt=(i("a439"),i("0831"),Object(Q["a"])(At,X,G,!1,null,null,null));Wt.options.__file="activity.vue";var zt=Wt.exports,Vt=i("49c2"),Zt={components:{vActivity:zt,vStoreProfile:K},data:function(){return{state:"",store:{},activities:[],user:{},images:["http://dkm.boogr-sooka.club/img/samples/CR-001.jpg","http://dkm.boogr-sooka.club/img/samples/CR-002.jpg"],activity:!1}},created:function(){this.refresh(),this.store.dirty&&(this.activity=!0)},methods:{refresh:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.id,t.next=3,dt["a"].findById(e);case 3:return i=t.sent,this.store=i,t.next=7,Vt["a"].me();case 7:return this.user=t.sent,t.next=10,Vt["a"].getCurrentPosition();case 10:n=t.sent,this.user.gps=JSON.stringify(n);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),checkIn:function(){var t=s()(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.store,i=this.user,e.last_visit=(new Date).toISOString().substr(0,23),e.dirty=!0,e.visit={visit_gps:i.gps,visit_checkin:e.last_visit,visit_isonline:navigator.onLine?1:0,store_id:e.store_id,user_id:i.user_id},t.prev=4,e.activities){t.next=11;break}return t.next=8,Ut.list();case 8:n=t.sent,n.forEach(function(t){t.link=t.activity_name.toLowerCase()}),e.activities=n;case 11:this.activity=!0,this.save(e),t.next=18;break;case 15:throw t.prev=15,t.t0=t["catch"](4),t.t0;case 18:case"end":return t.stop()}},t,this,[[4,15]])}));return function(){return t.apply(this,arguments)}}(),save:function(){var t=s()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:dt["a"].update(e);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},Qt=Zt,Bt=(i("d411"),i("2353"),Object(Q["a"])(Qt,n,r,!1,null,null,null));Bt.options.__file="store_detail.vue";e["default"]=Bt.exports},"9de8":function(t,e,i){"use strict";var n=i("84a3"),r=i.n(n);r.a},a439:function(t,e,i){"use strict";var n=i("297f"),r=i.n(n);r.a},adab:function(t,e,i){},ba2b:function(t,e,i){"use strict";var n=i("2d5c"),r=i.n(n);r.a},c2aa:function(t,e,i){},d411:function(t,e,i){"use strict";var n=i("5ee8"),r=i.n(n);r.a},df4e:function(t,e,i){"use strict";var n=i("adab"),r=i.n(n);r.a},ea8d:function(t,e,i){}}]);