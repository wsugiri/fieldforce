(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["57727290"],{"4d57":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-stores"},[n("q-card",[n("q-card-main",[n("q-icon",{attrs:{name:"fa fa-store"}}),t._v("\n      "+t._s("Total Store: "+t.list.length)+"\n    ")],1)],1),t._l(t.list,function(e,r){return n("q-card",{key:r},[n("q-card-main",{staticClass:"text-weight-light"},[n("div",{staticClass:"store store-name text-weight-medium"},[n("q-icon",{attrs:{name:"fa fa-building"}}),t._v("\n        "+t._s(e.store_name)+"\n      ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map"}}),t._v("\n        "+t._s(e.area_manage)+"\n      ")],1),n("div",{staticClass:"store store-location"},[n("q-icon",{attrs:{name:"fa fa-map-marker"}}),t._v("\n        "+t._s(e.region_name)+"\n      ")],1),e.last_visit?n("div",{staticClass:"store store-last-visit text-italic"},[n("q-icon",{attrs:{name:"fa fa-calendar-check"}}),t._v("\n        "+t._s(e.last_visit)+"\n      ")],1):t._e(),e.dirty?n("div",{staticClass:"store text-italic text-warning"},[n("q-icon",{attrs:{name:"fa fa-info"}}),t._v("\n        pending sync\n      ")],1):t._e(),n("q-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary"},on:{click:function(n){t.detail(e)}}},[t._v("Detail")])],1)],1)})],2)},i=[];r._withStripped=!0;n("96cf");var a=n("c973"),s=n.n(a),c=n("5014"),o={data:function(){return{opened:!1,model:{},store:{},list:[]}},created:function(){this.refresh()},methods:{refresh:function(){var t=s()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].list();case 2:e=t.sent,this.list=e;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),detail:function(t){this.$router.push("/stores/".concat(t.store_id))}}},u=o,f=(n("5d06"),n("d48f"),n("2877")),v=Object(f["a"])(u,r,i,!1,null,"9637d86e",null);v.options.__file="stores.vue";e["default"]=v.exports},5014:function(t,e,n){"use strict";n("ac6a"),n("cadf"),n("456d"),n("7514"),n("96cf");var r=n("c973"),i=n.n(r),a=(n("551c"),n("f61f")),s=a["a"].init(),c=s.axios,o="data-stores",u={stores:function(){var t=localStorage.getItem(o);return t?JSON.parse(t):[]},setStores:function(t){localStorage.setItem(o,JSON.stringify(t))}},f=function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.store_id){e.next=5;break}n("update"),e.next=12;break;case 5:return e.next=7,c.post("activityvisit",t.visit);case 7:i=e.sent,a=i.data,t.visit.visit_id=a.id,t.dirty=0,n(a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),r(e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,n){return e.apply(this,arguments)}}())},v=function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=t.visit.visit_id,e.next=4,c.put("activityvisit/".concat(i),{visit_checkout:t.visit.visit_checkout});case 4:a=e.sent,s=a.data,t.visit.id=s.id,t.dirty=0,n(s),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),r(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}())};e["a"]={list:function(){return new Promise(function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r=u.stores(),!navigator.onLine||r.length){t.next=8;break}return i="stores/store_allocate_mobile",t.next=6,c.get(i);case 6:a=t.sent,u.setStores(a.data.list);case 8:e(u.stores()),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),n(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e,n){return t.apply(this,arguments)}}())},findById:function(t){return new Promise(function(e,n){try{var r=u.stores(),i=r.filter(function(e){return e.store_id===t});e(i[0])}catch(t){n(t)}})},update:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,a,s,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=u.stores(),a=i.find(function(e){return e.store_id===t.store_id}),a)for(s=Object.keys(t),c=0;c<s.length;c+=1)o=s[c],a[o]=t[o];if(!a.visit||!navigator.onLine){e.next=7;break}return e.next=7,f(a);case 7:u.setStores(i),n(a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),r(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}())},updateStore:function(t){var e=u.stores(),n=e.find(function(e){return e.store_id===t.store_id});if(n)for(var r=Object.keys(t),i=0;i<r.length;i+=1){var a=r[i];n[a]=t[a]}u.setStores(e)},checkOut:function(t){return new Promise(function(){var e=i()(regeneratorRuntime.mark(function e(n,r){var i,a,s,c,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,i=u.stores(),a=i.find(function(e){return e.store_id===t.store_id}),a)for(s=Object.keys(t),c=0;c<s.length;c+=1)o=s[c],a[o]=t[o];if(!a.visit||!navigator.onLine){e.next=7;break}return e.next=7,v(a);case 7:u.setStores(i),n(a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),r(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}())}}},"54c2":function(t,e,n){},"5d06":function(t,e,n){"use strict";var r=n("f107"),i=n.n(r);i.a},d48f:function(t,e,n){"use strict";var r=n("54c2"),i=n.n(r);i.a},f107:function(t,e,n){}}]);